<!doctype html><html><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.6/dist/katex.min.css integrity=sha384-81hI3kRV62VEhJBKVz7JsJzaUcP5Ty/E1FFdkLh6yz8uWthgdssaWCD1j8R1r2iU crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.6/dist/katex.min.js integrity=sha384-8swauRFcjK634lyiWVXOA0GdycMCzfbC+6qXGQroVKYve7SFHawYjryBtaLve4xl crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.6/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\begin{cases}",right:"\\end{cases}",display:!0},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>有關 Barnsley Fern - Jayinnn's Blog</title><meta name=description content="本篇文章介紹Barnsley Fern並利用Python實作Chaos Game來繪製。"><meta name=KEYWORDS content="[Python,碎形,數學]"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://blog.jayinnn.dev/posts/barnsley-fern/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:image" content><meta property="og:title" content="有關 Barnsley Fern"><meta property="og:description" content="本篇文章介紹Barnsley Fern並利用Python實作Chaos Game來繪製。"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.jayinnn.dev/posts/barnsley-fern/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-05-07T00:00:00+00:00"><meta property="article:modified_time" content="2018-05-07T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="有關 Barnsley Fern"><meta name=twitter:description content="本篇文章介紹Barnsley Fern並利用Python實作Chaos Game來繪製。"><script src=https://blog.jayinnn.dev/js/feather.min.js></script>
<link href=https://blog.jayinnn.dev/css/fonts.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://blog.jayinnn.dev/css/main.css><link rel=stylesheet type=text/css href=https://blog.jayinnn.dev/css/dark.css media="(prefers-color-scheme: dark)"><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","eui3tfasm9")</script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-G3EZPSN86H"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G3EZPSN86H")</script><body><div class=content><header><div class=main><a href=https://blog.jayinnn.dev/>Jayinnn's Blog</a></div><nav><a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/diaries>Diaries</a>
<a href=/about>About</a>
<a href=/tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>有關 Barnsley Fern</h1><div class=meta>Posted on May 7, 2018</div></div><section class=body><h2 id=前言>前言</h2><figure><img src=https://upload.wikimedia.org/wikipedia/commons/7/76/Barnsley_fern_plotted_with_VisSim.PNG><figcaption><h4>Barnsley Fern</h4></figcaption></figure><p>引用英文版Wikipedia對Barnsley Fern的介紹:</p><blockquote><p>The Barnsley fern is a fractal named after the British mathematician Michael Barnsley who first described it in his book Fractals Everywhere. <em>From Wikipedia</em></p></blockquote><p>翻譯成中文大概就是:
&ldquo;<strong>Barnsley Fern</strong> 是一個由一位英國數學家 Michael Barnsley 在他所寫的書 Fractals Everywhere 中所描述的一種碎形&rdquo;</p><p>那甚麼是碎形呢?
我們再次引用Wikipedia，不過這次是中文版(我懶得翻譯阿)</p><blockquote><p>碎形（英語：Fractal），又稱分形、殘形，通常被定義為「一個粗糙或零碎的幾何形狀，可以分成數個部分，且每一部分都（至少近似地）是整體縮小後的形狀」，即具有自相似的性質。<em>From Wikipedia</em></p></blockquote><p>有名的碎形有<strong>科赫雪花</strong>與<strong>謝爾賓斯基三角形</strong>，有關謝爾賓斯基三角形可以參考部落格的另外一篇文章 <a href=https://jayin92.github.io/posts/sierpinski-triangle/>https://jayin92.github.io/posts/sierpinski-triangle/</a></p><figure><img src=https://upload.wikimedia.org/wikipedia/commons/f/fd/Von_Koch_curve.gif><figcaption><h4>科赫雪花</h4></figcaption></figure><figure><img src=https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/Animated_construction_of_Sierpinski_Triangle.gif/300px-Animated_construction_of_Sierpinski_Triangle.gif><figcaption><h4>謝爾賓斯基三角形</h4></figcaption></figure><p>我們可以很容易的看到說不管你把一個碎形放大多少倍，它所呈現的圖形會跟原本一模一樣，這就是碎形自相似的性質。</p><p>不過我們今天不會太深入去講碎形，因為其實我也不太會😭</p><h2 id=barnsley-fern-介紹>Barnsley Fern 介紹</h2><p>其實Barnsley Fern的描繪過程可以由下面方程組 (Transmotions functions &ldquo;變換函數?&rdquo;) 決定:</p><p><img src=/image/eq2.png alt></p><p>其中$P()$代表此方程式在此方程組的發生機率</p><p>而$f_1$主要生成Barnsley Fern中的梗的部分</p><p> $f_2$為小的散葉</p><p> $f_3$為左邊的葉子</p><p> $f_4$為右邊的葉子</p><h2 id=利用python內建的turtle庫畫出barnsley-fern>利用Python內建的Turtle庫畫出Barnsley Fern</h2><p>不過在電腦科學裡，我們可以利用迭代(遞迴)的方式來繪出Barnsley Fern</p><p><img src=/image/eq1.png alt></p><p>所以我們可以利用python寫出上面四個方程式 (函數傳入值及回傳值皆為tuple)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f1</span>(point): <span style=color:#75715e># 1%</span>
</span></span><span style=display:flex><span>	x <span style=color:#f92672>=</span> point[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>	y <span style=color:#f92672>=</span> point[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>	x1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	y1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.16</span> <span style=color:#f92672>*</span> y
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> (x1, y1)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f2</span>(point): <span style=color:#75715e># 85%</span>
</span></span><span style=display:flex><span>	x <span style=color:#f92672>=</span> point[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>	y <span style=color:#f92672>=</span> point[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>	x1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.85</span> <span style=color:#f92672>*</span> x <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.04</span> <span style=color:#f92672>*</span> y
</span></span><span style=display:flex><span>	y1 <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.04</span> <span style=color:#f92672>*</span> x <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.85</span> <span style=color:#f92672>*</span> y <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.6</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> (x1, y1)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f3</span>(point): <span style=color:#75715e># 7%</span>
</span></span><span style=display:flex><span>	x <span style=color:#f92672>=</span> point[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>	y <span style=color:#f92672>=</span> point[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>	x1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.2</span> <span style=color:#f92672>*</span> x <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.26</span> <span style=color:#f92672>*</span> y
</span></span><span style=display:flex><span>	y1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.23</span> <span style=color:#f92672>*</span> x <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.22</span> <span style=color:#f92672>*</span> y <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.6</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> (x1, y1)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f4</span>(point): <span style=color:#75715e># 7%</span>
</span></span><span style=display:flex><span>	x <span style=color:#f92672>=</span> point[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>	y <span style=color:#f92672>=</span> point[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>	x1 <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.15</span> <span style=color:#f92672>*</span> x <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.28</span> <span style=color:#f92672>*</span> y
</span></span><span style=display:flex><span>	y1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.26</span> <span style=color:#f92672>*</span> x  <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.24</span> <span style=color:#f92672>*</span> y <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.44</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> (x1, y1)
</span></span></code></pre></div><p>然後我們用一個非常沒有效率的方法來決定方程式的發生機率</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>choices <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>choices<span style=color:#f92672>.</span>append(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>85</span>):
</span></span><span style=display:flex><span>	choices<span style=color:#f92672>.</span>append(<span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>7</span>):
</span></span><span style=display:flex><span>	choices<span style=color:#f92672>.</span>append(<span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>7</span>):
</span></span><span style=display:flex><span>    choices<span style=color:#f92672>.</span>append(<span style=color:#ae81ff>4</span>)
</span></span></code></pre></div><p>然後利用random來從choices隨機取出1,2,3,4四個值</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>	print(i)
</span></span><span style=display:flex><span>	function <span style=color:#f92672>=</span> random<span style=color:#f92672>.</span>choice(choices)
</span></span><span style=display:flex><span>	print(function)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> function <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span>		tracepoint <span style=color:#f92672>=</span> f1(tracepoint)
</span></span><span style=display:flex><span>		drawdot(tracepoint)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>elif</span> function <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>:
</span></span><span style=display:flex><span>		tracepoint <span style=color:#f92672>=</span> f2(tracepoint)
</span></span><span style=display:flex><span>		drawdot(tracepoint)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>elif</span> function <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>:
</span></span><span style=display:flex><span>		tracepoint <span style=color:#f92672>=</span> f3(tracepoint)
</span></span><span style=display:flex><span>		drawdot(tracepoint)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>elif</span> function <span style=color:#f92672>==</span> <span style=color:#ae81ff>4</span>:
</span></span><span style=display:flex><span>		tracepoint <span style=color:#f92672>=</span> f4(tracepoint)
</span></span><span style=display:flex><span>		drawdot(tracepoint)
</span></span><span style=display:flex><span>	print(tracepoint)
</span></span><span style=display:flex><span>    i <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p><code>drawdot</code> 為利用turtle寫成的繪點函數 (回傳值及傳入值皆為tuple)
所以我們可以利用無限迴圈不斷迭代來繪出Barnsley Fern</p><p>這是畫出的結果</p><p><img src=/image/barnsley-fern.png alt></p><p>可以明顯看到這張圖是全部用點點出來的，謝爾賓斯基三角形也會利用類似方法產生。</p><h2 id=參考資料>參考資料</h2><p><a href=https://en.wikipedia.org/wiki/Barnsley_fern>https://en.wikipedia.org/wiki/Barnsley_fern</a></p><p><a href=https://en.wikipedia.org/wiki/Affine_transformation>https://en.wikipedia.org/wiki/Affine_transformation</a></p><p><a href=https://zh.wikipedia.org/wiki/>https://zh.wikipedia.org/wiki/</a>分形</p><h2 id=原始碼>原始碼</h2><p><a href=https://github.com/jayin92/Barnsley-fern>https://github.com/jayin92/Barnsley-fern</a></p><p>請執行leaves.py</p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/%E6%95%B8%E5%AD%B8>數學</a></li><li><a href=/tags/python>Python</a></li><li><a href=/tags/%E7%A2%8E%E5%BD%A2>碎形</a></li></ul></nav></div></article></main><footer><hr><a class=soc href=https://github.com/jayin92/ title=GitHub><i data-feather=github></i></a>|<a class=soc href=https://www.linkedin.com/in/jayinnn/ title=Linkedin><i data-feather=linkedin></i></a>|<a class=soc href=https://www.facebook.com/jayinnn title=Facebook><i data-feather=facebook></i></a>|<a class=soc href=mailto:me@jayinnn.dev title=Email><i data-feather=mail></i></a>|⚡️
2025 Jayinnn © CC BY-NC-SA 4.0 | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer><script>feather.replace()</script></div></body></html>